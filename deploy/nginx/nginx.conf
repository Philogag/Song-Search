
# 后端负载均衡
upstream backend-balance {
    server 1.15.141.169:8080 weight=1;
}

# 全局调度
server {
    listen 80;

    server_name *.*.*.*;

    # 前端
    location / {
        root /dist/desktop;
    }

    # 后端转发负载均衡
    location /basic-api/ {
        proxy_pass http://backend-balance/api/v1/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_redirect default;
        add_header Access-Control-Allow-Origin *;
        add_header Access-Control-Allow-Headers X-Requested-With;
        add_header Access-Control-Allow-Methods GET,POST,OPTIONS;
    }
}
